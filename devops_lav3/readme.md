# Лабораторная работа №3  
## Анализ плохих и хороших практик CI/CD

---

## Цель работы

Целью данной лабораторной работы является практическое изучение плохих и хороших практик при написании CI/CD пайплайнов. В ходе работы необходимо понять, какие ошибки считаются bad practices, почему они являются проблемой и как их исправление влияет на стабильность, воспроизводимость и надёжность CI/CD.

---

## Поставленные задачи

В рамках лабораторной работы требовалось:

- написать «плохой» CI/CD файл, содержащий не менее трёх bad practices;
- написать «хороший» CI/CD файл, в котором эти bad practices исправлены;
- описать каждую плохую практику, объяснить, почему она является проблемой, и показать, как она была исправлена;
- ознакомиться со статьёй про Васю (история про DevOps-культуру);
- оформить отчёт в виде README-файла в репозитории GitHub.

---

## Кратко о CI/CD

CI/CD (Continuous Integration / Continuous Delivery) — это набор практик и инструментов, позволяющих автоматически проверять код, собирать проект и выполнять проверки при каждом изменении. Корректно настроенный CI/CD снижает вероятность ошибок, упрощает поддержку проекта и делает процесс разработки более предсказуемым.

---

## Плохой CI/CD файл

Плохой CI/CD пайплайн описан в файле `bad_ci.yml`.

Данный пайплайн является намеренно плохо реализованным и содержит несколько распространённых bad practices, которые приводят к нестабильной и непредсказуемой работе CI/CD.

### Используемые bad practices

#### 1. Использование `latest` версий

В плохом CI/CD используются:
- `ubuntu-latest`
- `actions/checkout@latest`

Это является плохой практикой, так как данные версии не фиксированы. Поведение пайплайна может измениться в любой момент после обновления базового образа или GitHub Action, что нарушает воспроизводимость CI/CD и может привести к неожиданным ошибкам без изменения кода проекта.

---

#### 2. Отсутствие ограничений на запуск пайплайна

Пайплайн запускается при `push` в любую ветку. Это приводит к избыточным запускам CI/CD, увеличивает нагрузку и усложняет контроль изменений, особенно в реальных проектах с большим количеством веток.

---

#### 3. Ручная установка зависимостей без кеширования

В плохом пайплайне зависимости устанавливаются напрямую через `apt-get` и `pip` без использования специализированных GitHub Actions и без кеширования. Это делает сборку более медленной, менее стабильной и плохо масштабируемой.

---

#### 4. Нестабильность пайплайна

В результате использования перечисленных bad practices пайплайн является нестабильным и может завершаться с ошибкой, что наглядно демонстрирует проблемы, возникающие при неправильной настройке CI/CD.

---

### Скриншоты плохого CI/CD

 Детали выполнения `bad_ci.yml`  
<img width="2559" height="676" alt="image" src="https://github.com/user-attachments/assets/5e3d453e-6bd8-4b6a-824a-39f9bbc21039" />

 Сообщение об ошибке в логах `bad_ci.yml`  
<img width="768" height="361" alt="image" src="https://github.com/user-attachments/assets/cb5ee191-f164-43fa-b378-1b68394a6142" />


---

## Хороший CI/CD файл

Хороший CI/CD пайплайн описан в файле `good_ci.yml`.

В данном пайплайне все выявленные bad practices были исправлены, что сделало CI/CD стабильным, воспроизводимым и корректным с точки зрения DevOps-практик.

### Исправления и улучшения

#### 1. Фиксация версий

В хорошем CI/CD используются:
- `ubuntu-22.04`;
- `actions/checkout@v4`;
- явно задана версия Python (`3.10`).

Это гарантирует стабильность и воспроизводимость пайплайна, так как его поведение не изменится без явного изменения конфигурации.

---

#### 2. Корректные триггеры запуска

Пайплайн запускается только:
- при `push` в ветку `main`;
- при создании `pull request` в ветку `main`.

Это уменьшает количество лишних запусков CI/CD и соответствует типичному рабочему процессу разработки.

---

#### 3. Использование специализированных GitHub Actions

Для настройки окружения используется `actions/setup-python`, а также реализовано кеширование `pip`-зависимостей. Это ускоряет сборку и делает её более надёжной по сравнению с ручной установкой зависимостей.

---

#### 4. CI выполняет только CI-задачи

Хороший пайплайн выполняет только проверочные шаги и не пытается запускать серверы или имитировать продакшен-среду. CI используется строго по назначению.

---

### Скриншоты хорошего CI/CD

 Страница GitHub Actions с успешным выполнением `good_ci.yml`  
<img width="1562" height="536" alt="image" src="https://github.com/user-attachments/assets/81c0c164-8d23-47f2-929b-86e719cae934" />


 Детали выполнения `good_ci.yml`  
<img width="811" height="565" alt="image" src="https://github.com/user-attachments/assets/4d948e6c-33d2-4351-a54f-1ab978b82e2b" />


Логи выполнения шагов `good_ci.yml`  
<img width="667" height="844" alt="image" src="https://github.com/user-attachments/assets/b9c3b8df-3a65-4839-9f36-401349d44ca5" />
<img width="1358" height="1140" alt="image" src="https://github.com/user-attachments/assets/34bb9e07-31bb-45e6-a276-c68ff13449f0" />


---

## История про Васю

История про Васю наглядно демонстрирует, как чрезмерное и неосознанное использование DevOps-инструментов может привести к избыточно сложной инфраструктуре. Основной вывод заключается в том, что DevOps-инструменты должны применяться осмысленно и исходя из реальных задач проекта. CI/CD — это не цель, а средство упрощения разработки и сопровождения.

---

## Вывод

В ходе лабораторной работы были реализованы и проанализированы примеры плохого и хорошего CI/CD пайплайнов. На практике было показано, какие ошибки чаще всего встречаются при настройке CI/CD и почему они считаются bad practices.

Плохой пайплайн продемонстрировал нестабильность и ошибки, а исправленный вариант оказался стабильным, воспроизводимым и удобным для поддержки. Лабораторная работа позволила лучше понять принципы построения CI/CD и сформировать более осознанное отношение к DevOps-практикам.
